---
layout: post
title: "Week7"
categories: GSoC
---
## Thursday 11-07-2019
Today I completed the multichannel PWM example with RPMsg. <br>
Updated the c-bindings to the latest state of the cpp-bindings.<br>

I also watched videos about controlling stepper motors, don't want to risk damaging the BBB, motor or the driver. Also learnt the principle of how they work.

TODOs at this point: 
- Next I'll be working on making a firmware example for precise control of stepper motor.
- Check if multithreading has been implemented in the Daemon and if its working properly.
- How to pass a message buffer of more than 512 Bytes at a time using RPMsg. From what I read about this, the Resource Table needs to be modified on the firmware side and a driver modification in required on the ARM side. This would probably be required for waveform generation or any other application requiring transfer of large amount of data.
- Is the eCAP module or are the clock timers supposed to be used for pwm generation. Right now I'm using the principle that each instruction takes 5ns to execute.
- Complete the waveform generation example.
- Add function to receive messages on the RPMsg channel in raw form the same way as it was done for sending raw messages.
- Debian Packaging of the project.

For multichannel PWM, multiple pins can also be set at a time, I'm thinking of using this to further increase the accuracy.
[https://github.com/pratimugale/PRUSS-Bindings/pull/13](https://github.com/pratimugale/PRUSS-Bindings/pull/13)

## Wednesday 10-07-2019
Didn't write the blog today, made a couple of demonstration videos: [https://www.youtube.com/watch?v=GTZwvY6jkaI](https://www.youtube.com/watch?v=GTZwvY6jkaI). Will add the second video soon.

## Tuesday 09-07-2019
Started by reading about software pwms. The terms used sounded somewhat confusing at first. [http://ww1.microchip.com/downloads/en/AppNotes/Atmel-8020-Low-Jitter-Multi-Channel-Software-PWM_ApplicationNote_AVR136.pdf](http://ww1.microchip.com/downloads/en/AppNotes/Atmel-8020-Low-Jitter-Multi-Channel-Software-PWM_ApplicationNote_AVR136.pdf) This helped in understanding what had to be done. Most of the examples, however were in C instead of assembly. For easy calulation of frequency, I will be developing the example in assembly.
[https://github.com/pratimugale/PRUSS-Bindings/pull/12](https://github.com/pratimugale/PRUSS-Bindings/pull/12)

## Monday 08-07-2019
The Documentation and communication scheme was added in the example3. The stepper motor should arrive tomorrow according to FedEx. Till then I'm working on analog wave generation starting with sine wave. I don't know how to pass more than 512KB using RPMsg, supposedly the resource table has to be modified. Will update about this at the end of the day.
